let icoCadastrar = '<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12.59 16.967"> <path d="M.693,16.964a.762.762,0,0,1-.69-.83,12.675,12.675,0,0,1,1.519-5.355A5.28,5.28,0,0,1,6.3,8.045a5.279,5.279,0,0,1,4.773,2.734,12.557,12.557,0,0,1,1.519,5.355.76.76,0,0,1-.69.823.267.267,0,0,1-.07.006.762.762,0,0,1-.753-.69C10.663,11.818,9.055,9.558,6.3,9.558s-4.368,2.26-4.779,6.716a.76.76,0,0,1-.754.693C.74,16.967.717,16.966.693,16.964ZM2.808,3.488A3.488,3.488,0,1,1,6.3,6.975,3.49,3.49,0,0,1,2.808,3.488Zm1.519,0A1.969,1.969,0,1,0,6.3,1.519,1.975,1.975,0,0,0,4.327,3.488Z"></path></svg>';
let icoEntrar = '<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.277 18"> <path d="M-7539.275-4612a.688.688,0,0,1-.686-.688.685.685,0,0,1,.686-.684h6.475a1.706,1.706,0,0,0,1.707-1.7v-11.849a1.706,1.706,0,0,0-1.7-1.705h-6.479a.685.685,0,0,1-.686-.684.689.689,0,0,1,.686-.688h6.479a3.08,3.08,0,0,1,3.074,3.077V-4621h0v5.925A3.078,3.078,0,0,1-7532.8-4612Zm-.07-5.95a.686.686,0,0,1,0-.972l1.544-1.546h-9.513a.686.686,0,0,1-.686-.686.688.688,0,0,1,.686-.686h9.513l-1.555-1.574a.686.686,0,0,1,0-.972.686.686,0,0,1,.972,0l2.724,2.722.006.006a.507.507,0,0,1,.04.047c.006.011.011.017.017.028a.1.1,0,0,1,.022.028.114.114,0,0,1,.017.028c.006.012.012.017.017.029l.017.034c0,.012.006.017.012.029s.005.022.011.034a.351.351,0,0,0,.011.034c0,.011.006.025.006.036s.005.022.005.034.006.022.006.034a.211.211,0,0,1,.006.028.29.29,0,0,1,.005.068c0,.023-.005.046-.005.068s-.006.019-.006.028-.006.025-.006.036-.005.023-.005.034a.071.071,0,0,1-.006.034c-.006.011-.006.022-.011.034s-.006.023-.011.034-.006.017-.012.029l-.017.034c-.005.012-.011.017-.017.029a.108.108,0,0,0-.017.03.1.1,0,0,0-.022.028.131.131,0,0,1-.017.028.357.357,0,0,1-.045.051l-2.713,2.716a.685.685,0,0,1-.486.2A.687.687,0,0,1-7539.345-4617.951Zm3.685-2.716h0Z" transform="translate(7548 4630)"></path></svg>';
let icoPedidos = '<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 17.588"> <g transform="translate(0 -5.301)"> <g transform="translate(0 5.301)"> <path d="M17.537,6.743a.468.468,0,0,0-.466.466v12.38A2.373,2.373,0,0,1,14.7,21.96H3.3A2.373,2.373,0,0,1,.933,19.589V6.234H14.587v12.01a.466.466,0,1,0,.933,0V5.767a.468.468,0,0,0-.466-.466H.466A.468.468,0,0,0,0,5.767V19.585a3.306,3.306,0,0,0,3.3,3.3H14.7a3.306,3.306,0,0,0,3.3-3.3V7.209A.462.462,0,0,0,17.537,6.743Z" transform="translate(0 -5.301)"></path> <path d="M66.334,75.434a.466.466,0,1,0,0-.933H56.166a.466.466,0,1,0,0,.933Z" transform="translate(-53.535 -71.811)"></path> <path d="M66.334,319.1H56.166a.466.466,0,1,0,0,.933H66.33a.466.466,0,0,0,0-.933Z" transform="translate(-53.535 -306.904)"></path> <path d="M106.221,380.6H97.666a.466.466,0,1,0,0,.933h8.555a.466.466,0,1,0,0-.933Z" transform="translate(-93.422 -366.014)"></path> <path d="M51.7,128.867v5.045a.468.468,0,0,0,.466.466h5.065a.468.468,0,0,0,.466-.466v-5.045a.468.468,0,0,0-.466-.466H52.166A.468.468,0,0,0,51.7,128.867Zm.933.466h4.132v4.112H52.633Z" transform="translate(-49.691 -123.616)"></path> <path d="M241.221,140.4h-3.354a.466.466,0,0,0,0,.933h3.354a.466.466,0,1,0,0-.933Z" transform="translate(-228.173 -135.15)"></path> <path d="M241.221,194.6h-3.354a.466.466,0,0,0,0,.933h3.354a.466.466,0,1,0,0-.933Z" transform="translate(-228.173 -187.243)"></path> <path d="M241.687,252.667a.468.468,0,0,0-.466-.466h-3.354a.466.466,0,0,0,0,.933h3.354A.465.465,0,0,0,241.687,252.667Z" transform="translate(-228.173 -242.604)"></path> </g> </g> </svg>';
let icoFavoritos = '<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.311 16.548"> <path class="a" d="M15.768,1.393a4.6,4.6,0,0,0-6.544,0l-.644.644-.644-.644A4.627,4.627,0,0,0,1.393,7.937L8.58,15.124l7.188-7.188a4.6,4.6,0,0,0,0-6.544" transform="translate(0.575 0.575)"></path></svg>';
let icoTrocar = '<svg class="icon svg-inline--fa fa-sync fa-w-16" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="sync" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="" d="M492 8h-10c-6.627 0-12 5.373-12 12v110.627C426.929 57.261 347.224 8 256 8 123.228 8 14.824 112.338 8.31 243.493 7.971 250.311 13.475 256 20.301 256h10.016c6.353 0 11.646-4.949 11.977-11.293C48.157 132.216 141.097 42 256 42c82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12zm-.301 248h-10.015c-6.352 0-11.647 4.949-11.977 11.293C463.841 380.158 370.546 470 256 470c-82.608 0-154.672-46.952-190.299-116H180c6.627 0 12-5.373 12-12v-10c0-6.627-5.373-12-12-12H20c-6.627 0-12 5.373-12 12v160c0 6.627 5.373 12 12 12h10c6.627 0 12-5.373 12-12V381.373C85.071 454.739 164.777 504 256 504c132.773 0 241.176-104.338 247.69-235.493.339-6.818-5.165-12.507-11.991-12.507z"></path></svg>';
let isMobile = window.innerWidth < 990;
$('body').on('user_state_changed', function(e) {
    userStateChanged();
});

$(window).load(function(){
    userStateChanged();
});

$('body').on('click','.atalho-menu',function(){
    userStateChanged();
});

function userStateChanged(){
    let isLogged = $.cookie('LI-isUserLogged') ? $.cookie('LI-isUserLogged') : false;
    let userName = $.cookie('LI-UserLoggedName') ? $.cookie('LI-UserLoggedName').split(' ')[0] : 'Visitante';
    if(!isMobile){     
        $('#cabecalho .account-list').remove();
        $('.action-item.account > a').html('<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 37 37"><g transform="translate(-0.478 3.685)"><g class="a" transform="translate(0.478 -3.685)"><path class="c" d="M18.5,0A18.6,18.6,0,0,1,34.819,9.779,18.162,18.162,0,0,1,37,18.5,18.5,18.5,0,1,1,18.5,0Z"></path><path class="d" d="M 18.5 2 C 14.09268951416016 2 9.949180603027344 3.716300964355469 6.832740783691406 6.832740783691406 C 3.716300964355469 9.949180603027344 2 14.09268951416016 2 18.5 C 2 22.90731048583984 3.716300964355469 27.05081939697266 6.832740783691406 30.16725921630859 C 9.949180603027344 33.28369903564453 14.09268951416016 35 18.5 35 C 22.90731048583984 35 27.05081939697266 33.28369903564453 30.16725921630859 30.16725921630859 C 33.28369903564453 27.05081939697266 35 22.90731048583984 35 18.5 C 35 15.74249076843262 34.31491851806641 12.99007034301758 33.07001113891602 10.74802017211914 C 31.60560989379883 8.10453987121582 29.50716972351074 5.900890350341797 27.00154113769531 4.375289916992188 C 24.44939994812012 2.821361541748047 21.50960922241211 2 18.5 2 M 18.5 0 C 25.46812057495117 0 31.53646087646484 3.852439880371094 34.81949996948242 9.778860092163086 C 36.16239166259766 12.19734954833984 37 15.2508602142334 37 18.5 C 37 28.71726989746094 28.71726989746094 37 18.5 37 C 8.282730102539063 37 0 28.71726989746094 0 18.5 C 0 8.282730102539063 8.282730102539063 0 18.5 0 Z"></path></g><path class="b" d="M.877,21.449A.964.964,0,0,1,0,20.4a16.026,16.026,0,0,1,1.921-6.771,6.676,6.676,0,0,1,6.034-3.457,6.674,6.674,0,0,1,6.034,3.457A15.876,15.876,0,0,1,15.915,20.4a.96.96,0,0,1-.872,1.041.337.337,0,0,1-.089.008A.964.964,0,0,1,14,20.576c-.52-5.634-2.553-8.492-6.042-8.492s-5.522,2.858-6.042,8.492a.961.961,0,0,1-.953.877C.935,21.453.906,21.452.877,21.449ZM3.55,4.41A4.41,4.41,0,1,1,7.959,8.819,4.413,4.413,0,0,1,3.55,4.41Zm1.92,0A2.489,2.489,0,1,0,7.959,1.921,2.5,2.5,0,0,0,5.47,4.41Z" transform="translate(11.308 4.191)"></path></g></svg> Ol√°, ' + userName);
        if(!isLogged === "false"){            
            $(".account").append($('<ul class="account-list loggedIn"> <li> <a href="/conta/index">'+ icoCadastrar +'Minha Conta </a> </li> <li> <a href="/conta/pedido/listar">'+ icoPedidos +' Meus Pedidos </a> </li> <li> <a href="/conta/favorito/listar">'+ icoFavoritos+' Favoritos </a> </li><li> <a href="https://lojacolaedecora.troque.app.br/" target="_blank">'+ icoTrocar+' Trocar/Devolver </a> </li> <li> <a href="/conta/logout">'+ icoEntrar +' Sair </a> </li></ul>'));
        }else{
            $(".account").append($('<ul class="account-list loggedOut"> <li> <a href="/conta/login"> <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12.59 16.967"> <path d="M.693,16.964a.762.762,0,0,1-.69-.83,12.675,12.675,0,0,1,1.519-5.355A5.28,5.28,0,0,1,6.3,8.045a5.279,5.279,0,0,1,4.773,2.734,12.557,12.557,0,0,1,1.519,5.355.76.76,0,0,1-.69.823.267.267,0,0,1-.07.006.762.762,0,0,1-.753-.69C10.663,11.818,9.055,9.558,6.3,9.558s-4.368,2.26-4.779,6.716a.76.76,0,0,1-.754.693C.74,16.967.717,16.966.693,16.964ZM2.808,3.488A3.488,3.488,0,1,1,6.3,6.975,3.49,3.49,0,0,1,2.808,3.488Zm1.519,0A1.969,1.969,0,1,0,6.3,1.519,1.975,1.975,0,0,0,4.327,3.488Z" /></svg> Cadastrar </a> </li> <li> <a href="/conta/login"> <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.277 18"> <path d="M-7539.275-4612a.688.688,0,0,1-.686-.688.685.685,0,0,1,.686-.684h6.475a1.706,1.706,0,0,0,1.707-1.7v-11.849a1.706,1.706,0,0,0-1.7-1.705h-6.479a.685.685,0,0,1-.686-.684.689.689,0,0,1,.686-.688h6.479a3.08,3.08,0,0,1,3.074,3.077V-4621h0v5.925A3.078,3.078,0,0,1-7532.8-4612Zm-.07-5.95a.686.686,0,0,1,0-.972l1.544-1.546h-9.513a.686.686,0,0,1-.686-.686.688.688,0,0,1,.686-.686h9.513l-1.555-1.574a.686.686,0,0,1,0-.972.686.686,0,0,1,.972,0l2.724,2.722.006.006a.507.507,0,0,1,.04.047c.006.011.011.017.017.028a.1.1,0,0,1,.022.028.114.114,0,0,1,.017.028c.006.012.012.017.017.029l.017.034c0,.012.006.017.012.029s.005.022.011.034a.351.351,0,0,0,.011.034c0,.011.006.025.006.036s.005.022.005.034.006.022.006.034a.211.211,0,0,1,.006.028.29.29,0,0,1,.005.068c0,.023-.005.046-.005.068s-.006.019-.006.028-.006.025-.006.036-.005.023-.005.034a.071.071,0,0,1-.006.034c-.006.011-.006.022-.011.034s-.006.023-.011.034-.006.017-.012.029l-.017.034c-.005.012-.011.017-.017.029a.108.108,0,0,0-.017.03.1.1,0,0,0-.022.028.131.131,0,0,1-.017.028.357.357,0,0,1-.045.051l-2.713,2.716a.685.685,0,0,1-.486.2A.687.687,0,0,1-7539.345-4617.951Zm3.685-2.716h0Z" transform="translate(7548 4630)" /></svg> Entrar </a> </li></ul>'))        
        }
    }else{
        $('.menu.superior.visible-phone .action-links ul').remove();
        
        $('.menu.superior.visible-phone .action-links > a > .content').html('<small style="text-decoration:none;">Ol√°,</small><br><u>' + userName + '</u>');
        if(!isLogged === "false"){
            $('.menu.superior.visible-phone .action-links').append("<ul class='nivel-dois borda-alpha loggedIn'><li><a href='/conta/index'><span class='customIco'>"+ icoCadastrar +"</span>Minha conta</a></li><li><a href='/conta/pedido/listar'><span class='customIco'>"+ icoPedidos +"</span>Meus pedidos</a></li><li><a href='/conta/favorito/listar'><span class='customIco'>"+ icoFavoritos +"</span>Meus favoritos</a></li><li><a href='https://lojacolaedecora.troque.app.br/' target='_blank'><span class='customIco'>"+ icoTrocar+"</span>Trocar/Devolver</a></li></li><li><a href='/conta/logout'><span class='customIco'>"+ icoEntrar +"</span>Sair</a></li></ul>");
        }else{
            $('.menu.superior.visible-phone .action-links').append("<ul class='nivel-dois borda-alpha loggedOut'><li><a href='/conta/login'><span class='customIco'>"+ icoEntrar +"</span>Entrar</a></li><li><a href='/conta/index'><span class='customIco'>"+ icoCadastrar +"</span>Cadastrar</a></li></ul>");
        }
    }

    if($('.pagina-carrinho:not(.carrinho-checkout)').length > 0){
        $('[for="usarCupom"]').closest('tr').insertBefore('#cep-wrapper');
        $('.possui-cupom').closest('tr').insertBefore('#cep-wrapper');
    }
}